async function getFal() {
  const q1 = document.querySelector('input[name="q1"]:checked');
  const q2 = document.querySelector('input[name="q2"]:checked');
  const q3 = document.querySelector('input[name="q3"]:checked');
  const q4 = document.querySelector('input[name="q4"]:checked');

  if (!q1 || !q2 || !q3 || !q4) {
    alert("LÃ¼tfen tÃ¼m sorularÄ± yanÄ±tla.");
    return;
  }

  const combinationKey = `${q1.value}_${q2.value}_${q3.value}`;

  try {
    const res = await fetch('fallar.json');
    const data = await res.json();

    let randomFal = "BugÃ¼n senin iÃ§in gÃ¼zel ÅŸeyler olabilir.";

    if (data[combinationKey]) {
      const options = data[combinationKey];
      randomFal = options[Math.floor(Math.random() * options.length)];
    }

    // Ä°lk iki seÃ§enekte yÃ¶nlendirme yap
    if (q4.value === "duydum" || q4.value === "hayir") {
      const isAdminDevice = navigator.userAgent.includes("Win64") || navigator.userAgent.includes("Macintosh");
      if (localStorage.getItem("pandomimDahaOnceZiyaret") === "evet" && !isAdminDevice) {
        alert("Bu cihaz daha Ã¶nce ziyaret ettiÄŸini hatÄ±rlÄ±yor. Seni direkt fal kÃ¶ÅŸemize alÄ±yoruz ğŸ˜Š");
      } else {
        alert("ğŸ‰ Pandomim'le ilk tanÄ±ÅŸmana Ã¶zel bir sÃ¼rpriz seni bekliyor! Hadi Ã§arkÄ± Ã§evir!");
        localStorage.setItem("pandomimDahaOnceZiyaret", "evet");
        setTimeout(() => {
          window.open("https://pandomimcafe.github.io/PANDOM-MCAFE/", "_blank");
        }, 500);
        return;
      }
    } else {
      randomFal += "\n\nğŸ‰ Harika! Seni tekrar aÄŸÄ±rlamak Ã§ok gÃ¼zel. Pandomim senin yerin!";
    }

    document.getElementById("result").innerText = randomFal;
    document.getElementById("result").style.display = "block";
    document.getElementById("etiketUyarisi").style.display = "block";

  } catch (error) {
    document.getElementById("result").innerText = "âš ï¸ Fal verisi alÄ±namadÄ±. LÃ¼tfen daha sonra tekrar deneyin.";
    document.getElementById("result").style.display = "block";
  }
}
